[Unit]
Description=Commute GCM Server
After=network.target
ConditionPathExists=/var/play/splendidbits/play-agency-alerts-dispatcher

[Service]
User=splendidbits
Type=forking
WorkingDirectory=/var/play/splendidbits/play-agency-alerts-dispatcher
PIDFile=/var/play/splendidbits/play-agency-alerts-dispatcher/target/universal/stage/RUNNING_PID
ExecStart=/var/play/splendidbits/play-agency-alerts-dispatcher/target/universal/stage/bin/commute-gcm -J-Xms128M -J-Xmx512m -J-server
ExecStop=/bin/kill $MAINPID
ExecStopPost=/bin/rm /var/play/splendidbits/play-agency-alerts-dispatcher/target/universal/stage/RUNNING_PID
ExecReload=/bin/kill $MAINPID
Restart=always

[Install]
WantedBy=multi-user.target